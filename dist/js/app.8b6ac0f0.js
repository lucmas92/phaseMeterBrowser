(()=>{"use strict";var e={643:(e,t,a)=>{var l=a(751),n=a(641);const r={id:"app"},o={__name:"App",setup(e){(0,n.sV)((()=>{t()}));const t=()=>{const e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()};return(e,t)=>{const a=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(a)])}}},s=o,i=s;var u=a(723);(0,u.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var c=a(220),v=a(33),d=a(953),p=a(267),m=a(508);const f={id:"barchart"},b={__name:"BarChartComponent",props:{data:Array},setup(e){m.t1.register(...m.$L);const t=e,a={scales:{y:{max:8e3}}},l=(0,n.EW)((()=>({labels:["F1","F2","F3"],datasets:[{label:"Assorbimento fasi",barThickness:10,data:t.data,backgroundColor:["#fff477","#fff477","#fff477"]}]})));return(e,t)=>((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)((0,d.R1)(p.Es),{height:250,width:300,options:a,chartData:l.value},null,8,["chartData"])]))}};var g=a(262);const h=(0,g.A)(b,[["__scopeId","data-v-b696081c"]]),k=h;var w=a(278);const y={__name:"TotalComponent",props:{value:Number},setup(e){const t=e,a=(0,w.Pj)();(0,n.wB)((()=>t.value),(()=>{const e=a.getters.limit,n=a.getters.soundStatus??!1;a.commit("setAlert",t.value>e),n&&t.value>e&&l()}));const l=()=>{const e=new Audio("/sound.mp3");e.play()};return(t,a)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",null,(0,v.v_)(e.value),1)]))}},L=y,C=L,E={key:0,class:"modal-overlay"},S={class:"modal-container"},_={class:"form-group"},A={class:"form-group"},F={class:"form-group"},x={class:"form-group",style:{flex:"1"}},R={class:"switch"},j={__name:"SettingsComponent",setup(e){const t=(0,d.KR)(!1),a=(0,w.Pj)(),r=(0,d.KR)({url:"",interval:null,limit:null,soundStatus:!1}),o=async()=>{r.value.url=a.getters.url,r.value.interval=a.getters.interval,r.value.limit=a.getters.limit,r.value.soundStatus=a.getters.soundStatus,t.value=!0},s=async()=>{t.value=!1},i=async()=>{r.value.url&&r.value.interval&&r.value.limit?(a.commit("setLimit",r.value.limit),a.commit("setUrl",r.value.url),a.commit("setInterval",r.value.interval),a.commit("setSoundStatus",r.value.soundStatus),s()):alert("Compilare tutti i campi!")};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("button",{style:{position:"absolute","z-index":"10",right:"1rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:o},a[4]||(a[4]=[(0,n.Lk)("i",{class:"fa-solid fa-3x fa-gears"},null,-1)])),t.value?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",S,[(0,n.Lk)("form",{onSubmit:(0,l.D$)(i,["prevent"])},[(0,n.Lk)("div",_,[a[5]||(a[5]=(0,n.Lk)("label",{for:"url"},"URL:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"url","onUpdate:modelValue":a[0]||(a[0]=e=>r.value.url=e),placeholder:"Inserisci indirizzo"},null,512),[[l.Jo,r.value.url]])]),(0,n.Lk)("div",A,[a[6]||(a[6]=(0,n.Lk)("label",{for:"interval"},"Intervallo richieste (secondi):",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"interval","onUpdate:modelValue":a[1]||(a[1]=e=>r.value.interval=e),min:"1",placeholder:"Inserisci intervallo"},null,512),[[l.Jo,r.value.interval,void 0,{number:!0}]])]),(0,n.Lk)("div",F,[a[7]||(a[7]=(0,n.Lk)("label",{for:"limit"},"Soglia limite (kW):",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"limit","onUpdate:modelValue":a[2]||(a[2]=e=>r.value.limit=e),min:"1",placeholder:"Inserisci soglia limite"},null,512),[[l.Jo,r.value.limit,void 0,{number:!0}]])]),(0,n.Lk)("div",x,[a[9]||(a[9]=(0,n.Lk)("label",{for:"limit"},"Suono attivo:",-1)),(0,n.Lk)("label",R,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>r.value.soundStatus=e)},null,512),[[l.lH,r.value.soundStatus]]),a[8]||(a[8]=(0,n.Lk)("span",{class:"slider"},null,-1))])]),(0,n.Lk)("div",{class:"button-group"},[a[10]||(a[10]=(0,n.Lk)("button",{type:"submit",class:"save-btn",style:{flex:"1"}},"Salva",-1)),(0,n.Lk)("button",{type:"button",class:"cancel-btn",style:{flex:"1"},onClick:s},"Annulla")])],32)])])):(0,n.Q3)("",!0)]))}},I=(0,g.A)(j,[["__scopeId","data-v-8d91ded4"]]),O=I,K={__name:"OfflineAlertComponent",setup(e){const t=(0,d.KR)("");(0,n.sV)((async()=>{window.addEventListener("online",r),window.addEventListener("offline",r)})),(0,n.xo)((()=>{window.removeEventListener("online",r),window.removeEventListener("offline",r)}));const a=(0,d.KR)(navigator.onLine),r=()=>{a.value=navigator.onLine,t.value=a.value?"Sei di nuovo online!":"âš  Connessione persa! Sei offline.",a.value&&setTimeout((()=>{t.value=""}),3e3)};return(e,r)=>((0,n.uX)(),(0,n.Wv)(l.eB,{name:"slide"},{default:(0,n.k6)((()=>[t.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,v.C4)(["banner",a.value?"online":"offline"])},(0,v.v_)(t.value),3)):(0,n.Q3)("",!0)])),_:1}))}},X=(0,g.A)(K,[["__scopeId","data-v-3776df69"]]),U=X,V={key:0,class:"error bg-danger"},q={key:1,id:"main"},T={__name:"HomeView",setup(e){const t=(0,d.KR)([]),a=(0,d.KR)(null),l=(0,d.KR)(!1),r=(0,d.KR)(0),o=(0,w.Pj)(),s=(0,d.KR)(2e4),i=(0,d.KR)(!1);(0,n.wB)((()=>o.getters.alert),(function(e){i.value=e})),(0,n.wB)((()=>o.getters.interval),(async function(e){s.value=1e3*e,clearInterval(a.value),await c(),a.value=setInterval((async()=>{await c()}),s.value)})),(0,n.sV)((async()=>{await c(),a.value=setInterval((async()=>{await c()}),s.value)})),(0,n.xo)((()=>{clearInterval(a.value)}));const u=async()=>{await c(),alert("Dati aggiornati")},c=async()=>{const e=o.getters.url,a=`/.netlify/functions/proxy?url=${encodeURIComponent(e)}`;let n={};try{const e=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw l.value=!0,new Error("Errore nella richiesta");l.value=!1,n=await e.json(),t.value=[n.phases[0].powerActive,n.phases[1].powerActive,n.phases[2].powerActive],r.value=parseFloat((n.phases.reduce(((e,t)=>e+t.powerActive),0)/1e3).toFixed(1))}catch(l){console.error("Errore:",l)}};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,v.C4)(["home",{"bg-danger":i.value,"bg-default":!i.value}])},[l.value?((0,n.uX)(),(0,n.CE)("div",V," Errore nella richiesta! ")):(0,n.Q3)("",!0),(0,n.bF)(O),(0,n.Lk)("button",{style:{position:"absolute","z-index":"10",right:"6rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:u},a[0]||(a[0]=[(0,n.Lk)("i",{class:"fa-solid fa-3x fa-rotate"},null,-1)])),t.value.length>0?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.bF)(k,{data:t.value},null,8,["data"]),(0,n.bF)(C,{value:r.value,style:{flex:"1"}},null,8,["value"])])):(0,n.Q3)("",!0),(0,n.bF)(U)],2))}},B=(0,g.A)(T,[["__scopeId","data-v-59a8653c"]]),P=B,Q=[{path:"/",name:"home",component:P}],z=(0,c.aE)({history:(0,c.LA)("/"),routes:Q}),D=z,N=(0,w.y$)({state:{url:"https://svr78.supla.org/direct/927/jW53MRbcodQwZj/read?format=json",limit:10,interval:10,alert:!1,soundStatus:!1},getters:{url(e){return e.url},limit(e){return e.limit},interval(e){return e.interval},alert(e){return e.alert},soundStatus(e){return e.soundStatus}},mutations:{setLimit(e,t){e.limit=t},setInterval(e,t){e.interval=t},setUrl(e,t){e.url=t},setAlert(e,t){e.alert=t},setSoundStatus(e,t){e.soundStatus=t}},actions:{},modules:{}});(0,l.Ef)(i).use(N).use(D).mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,l,n,r)=>{if(!l){var o=1/0;for(c=0;c<e.length;c++){for(var[l,n,r]=e[c],s=!0,i=0;i<l.length;i++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](l[i])))?l.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[l,n,r]}})(),(()=>{a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,r,[o,s,i]=l,u=0;if(o.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(i)var c=i(a)}for(t&&t(l);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},l=self["webpackChunkcontatorev3"]=self["webpackChunkcontatorev3"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=a.O(void 0,[504],(()=>a(643)));l=a.O(l)})();
//# sourceMappingURL=app.8b6ac0f0.js.map