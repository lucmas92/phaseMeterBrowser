(()=>{"use strict";var e={850:(e,t,r)=>{var a=r(751),n=r(641);const o={id:"app"};function l(e,t){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(r)])}var i=r(262);const s={},u=(0,i.A)(s,[["render",l]]),c=u;var v=r(723);(0,v.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=r(220),p=r(33),m=r(953),f=r(267),g=r(508);const b={id:"barchart"},h={__name:"BarChartComponent",props:{data:Array},setup(e){g.t1.register(...g.$L);const t=e,r={scales:{y:{max:8e3}}},a=(0,n.EW)((()=>({labels:["F1","F2","F3"],datasets:[{label:"Assorbimento fasi",barThickness:10,data:t.data,backgroundColor:["#fff477","#fff477","#fff477"]}]})));return(e,t)=>((0,n.uX)(),(0,n.CE)("div",b,[(0,n.bF)((0,m.R1)(f.Es),{height:300,width:250,options:r,chartData:a.value},null,8,["chartData"])]))}},w=(0,i.A)(h,[["__scopeId","data-v-5a188d66"]]),y=w;var k=r(278);const E={__name:"TotalComponent",props:{value:Number},setup(e){const t=e,r=(0,k.Pj)();(0,n.wB)((()=>t.value),(()=>{const e=r.getters.limit,n=r.getters.soundStatus??!1;r.commit("setAlert",t.value>e),n&&t.value>e&&a()}));const a=()=>{const e=new Audio("/sound.mp3");e.play()};return(t,r)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",null,(0,p.v_)(e.value),1)]))}},L=E,R=L,A={key:0,class:"modal-overlay"},C={class:"modal-container"},F={class:"form-group"},S={class:"form-group"},_={class:"form-group"},x={class:"form-group",style:{flex:"1"}},I={class:"switch"},j={__name:"SettingsComponent",setup(e){const t=(0,m.KR)(!1),r=(0,k.Pj)(),o=(0,m.KR)({url:"",interval:null,limit:null,soundStatus:!1}),l=async()=>{o.value.url=r.getters.url,o.value.interval=r.getters.interval,o.value.limit=r.getters.limit,o.value.soundStatus=r.getters.soundStatus,t.value=!0},i=async()=>{t.value=!1},s=async()=>{o.value.url&&o.value.interval&&o.value.limit?(r.commit("setLimit",o.value.limit),r.commit("setUrl",o.value.url),r.commit("setInterval",o.value.interval),r.commit("setSoundStatus",o.value.soundStatus),i()):alert("Compilare tutti i campi!")};return(e,r)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("button",{style:{position:"absolute","z-index":"10",right:"1rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:l},r[4]||(r[4]=[(0,n.Lk)("i",{class:"fa-solid fa-3x fa-gears"},null,-1)])),t.value?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("div",C,[(0,n.Lk)("form",{onSubmit:(0,a.D$)(s,["prevent"])},[(0,n.Lk)("div",F,[r[5]||(r[5]=(0,n.Lk)("label",{for:"url"},"URL:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"url","onUpdate:modelValue":r[0]||(r[0]=e=>o.value.url=e),placeholder:"Inserisci indirizzo"},null,512),[[a.Jo,o.value.url]])]),(0,n.Lk)("div",S,[r[6]||(r[6]=(0,n.Lk)("label",{for:"interval"},"Intervallo richieste (secondi):",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"interval","onUpdate:modelValue":r[1]||(r[1]=e=>o.value.interval=e),min:"1",placeholder:"Inserisci intervallo"},null,512),[[a.Jo,o.value.interval,void 0,{number:!0}]])]),(0,n.Lk)("div",_,[r[7]||(r[7]=(0,n.Lk)("label",{for:"limit"},"Soglia limite (kW):",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"limit","onUpdate:modelValue":r[2]||(r[2]=e=>o.value.limit=e),min:"1",placeholder:"Inserisci soglia limite"},null,512),[[a.Jo,o.value.limit,void 0,{number:!0}]])]),(0,n.Lk)("div",x,[r[9]||(r[9]=(0,n.Lk)("label",{for:"limit"},"Suono attivo:",-1)),(0,n.Lk)("label",I,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[3]||(r[3]=e=>o.value.soundStatus=e)},null,512),[[a.lH,o.value.soundStatus]]),r[8]||(r[8]=(0,n.Lk)("span",{class:"slider"},null,-1))])]),(0,n.Lk)("div",{class:"button-group"},[r[10]||(r[10]=(0,n.Lk)("button",{type:"submit",class:"save-btn",style:{flex:"1"}},"Salva",-1)),(0,n.Lk)("button",{type:"button",class:"cancel-btn",style:{flex:"1"},onClick:i},"Annulla")])],32)])])):(0,n.Q3)("",!0)]))}},O=(0,i.A)(j,[["__scopeId","data-v-8d91ded4"]]),K=O,X={__name:"OfflineAlertComponent",setup(e){const t=(0,m.KR)("");(0,n.sV)((async()=>{window.addEventListener("online",o),window.addEventListener("offline",o)})),(0,n.xo)((()=>{window.removeEventListener("online",o),window.removeEventListener("offline",o)}));const r=(0,m.KR)(navigator.onLine),o=()=>{r.value=navigator.onLine,t.value=r.value?"Sei di nuovo online!":"âš  Connessione persa! Sei offline.",r.value&&setTimeout((()=>{t.value=""}),3e3)};return(e,o)=>((0,n.uX)(),(0,n.Wv)(a.eB,{name:"slide"},{default:(0,n.k6)((()=>[t.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,p.C4)(["banner",r.value?"online":"offline"])},(0,p.v_)(t.value),3)):(0,n.Q3)("",!0)])),_:1}))}},q=(0,i.A)(X,[["__scopeId","data-v-3776df69"]]),U=q,T={key:0,class:"banner error bg-danger"},V={key:1,class:"banner bg-info"},B={key:2,id:"main"},N={__name:"HomeView",setup(e){const t=(0,m.KR)([]),r=(0,m.KR)(null),a=(0,m.KR)(""),o=(0,m.KR)(!1),l=(0,m.KR)(0),i=(0,k.Pj)(),s=(0,m.KR)(2e4),u=(0,m.KR)(!1);(0,n.wB)((()=>i.getters.alert),(function(e){u.value=e})),(0,n.wB)((()=>i.getters.interval),(async function(e){s.value=1e3*e,clearInterval(r.value),await f(),r.value=setInterval((async()=>{await f()}),s.value)})),(0,n.sV)((async()=>{await f(),r.value=setInterval((async()=>{await f()}),s.value)})),(0,n.xo)((()=>{clearInterval(r.value)}));const c=()=>{f(),v("Richiesta aggiornamento dati inviata")},v=e=>{a.value=e,setTimeout((()=>{a.value=""}),3e3)},d=()=>{const e=document.documentElement;e.requestFullscreen?(alert("richiesta fullscreen std"),e.requestFullscreen()):e.webkitRequestFullscreen?(alert("richiesta fullscreen old"),e.webkitRequestFullscreen()):e.msRequestFullscreen?(alert("richiesta fullscreen webkit"),e.msRequestFullscreen()):console.error("Error nella richiesta di fullscreen")},f=async()=>{const e=i.getters.url,r=`/.netlify/functions/proxy?url=${encodeURIComponent(e)}`;let a={};try{await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});o.value=!1,a={connected:!0,connectedCode:"CONNECTED",support:65535,currency:"EUR",pricePerUnit:.25,totalCost:25200.43,phases:[{number:1,frequency:49.95,voltage:218.59,current:2.877,powerActive:598.66272,powerReactive:44.20336,powerApparent:616.7572,powerFactor:.968,phaseAngle:4.5,totalForwardActiveEnergy:29234.01958,totalReverseActiveEnergy:.06848,totalForwardReactiveEnergy:7249.51144,totalReverseReactiveEnergy:19.56792},{number:2,frequency:49.95,voltage:226.59,current:12.623,powerActive:2803.39416,powerReactive:-65.13248,powerApparent:2804.33542,powerFactor:.998,phaseAngle:-1.5,totalForwardActiveEnergy:29273.50348,totalReverseActiveEnergy:.09814,totalForwardReactiveEnergy:533.4208,totalReverseReactiveEnergy:1324.1807},{number:3,frequency:49.95,voltage:224.02,current:7.12,powerActive:1481.37692,powerReactive:397.27526,powerApparent:1563.77158,powerFactor:.947,phaseAngle:15.2,totalForwardActiveEnergy:42294.21286,totalReverseActiveEnergy:.07246,totalForwardReactiveEnergy:8771.6477,totalReverseReactiveEnergy:32.92762}]},t.value=[a.phases[0].powerActive,a.phases[1].powerActive,a.phases[2].powerActive],l.value=parseFloat((a.phases.reduce(((e,t)=>e+t.powerActive),0)/1e3).toFixed(1))}catch(o){console.error("Errore:",o)}};return(e,r)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,p.C4)(["home",{"bg-danger":u.value,"bg-default":!u.value}])},[o.value?((0,n.uX)(),(0,n.CE)("div",T," Errore nella richiesta! ")):(0,n.Q3)("",!0),a.value?((0,n.uX)(),(0,n.CE)("div",V,(0,p.v_)(a.value),1)):(0,n.Q3)("",!0),(0,n.bF)(K),(0,n.Lk)("button",{style:{position:"absolute","z-index":"10",right:"10rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:d},r[0]||(r[0]=[(0,n.Lk)("i",{class:"fa-solid fa-3x fa-up-right-and-down-left-from-center"},null,-1)])),(0,n.Lk)("button",{style:{position:"absolute","z-index":"10",right:"6rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:c},r[1]||(r[1]=[(0,n.Lk)("i",{class:"fa-solid fa-3x fa-rotate"},null,-1)])),t.value.length>0?((0,n.uX)(),(0,n.CE)("div",B,[(0,n.bF)(y,{data:t.value},null,8,["data"]),(0,n.bF)(R,{value:l.value,style:{flex:"1"}},null,8,["value"])])):(0,n.Q3)("",!0),(0,n.bF)(U)],2))}},P=(0,i.A)(N,[["__scopeId","data-v-a90e3c1e"]]),Q=P,z=[{path:"/",name:"home",component:Q}],D=(0,d.aE)({history:(0,d.LA)("/"),routes:z}),W=D,$=(0,k.y$)({state:{url:"https://svr78.supla.org/direct/927/jW53MRbcodQwZj/read?format=json",limit:10,interval:10,alert:!1,soundStatus:!1},getters:{url(e){return e.url},limit(e){return e.limit},interval(e){return e.interval},alert(e){return e.alert},soundStatus(e){return e.soundStatus}},mutations:{setLimit(e,t){e.limit=t},setInterval(e,t){e.interval=t},setUrl(e,t){e.url=t},setAlert(e,t){e.alert=t},setSoundStatus(e,t){e.soundStatus=t}},actions:{},modules:{}});(0,a.Ef)(c).use($).use(W).mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,o)=>{if(!a){var l=1/0;for(c=0;c<e.length;c++){for(var[a,n,o]=e[c],i=!0,s=0;s<a.length;s++)(!1&o||l>=o)&&Object.keys(r.O).every((e=>r.O[e](a[s])))?a.splice(s--,1):(i=!1,o<l&&(l=o));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,n,o]}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[l,i,s]=a,u=0;if(l.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var c=s(r)}for(t&&t(a);u<l.length;u++)o=l[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},a=self["webpackChunkcontatorev3"]=self["webpackChunkcontatorev3"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[504],(()=>r(850)));a=r.O(a)})();
//# sourceMappingURL=app.e49ccd0d.js.map