(()=>{"use strict";var e={305:(e,t,l)=>{var n=l(751),r=l(641);const o={id:"app"};function a(e,t){const l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(l)])}var s=l(262);const i={},u=(0,s.A)(i,[["render",a]]),c=u;var v=l(723);(0,v.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=l(220),p=l(33),m=l(953),f=l(267),b=l(508);const g={id:"barchart"},h={__name:"BarChartComponent",props:{data:Array},setup(e){b.t1.register(...b.$L);const t=e,l={scales:{y:{max:8e3}}},n=(0,r.EW)((()=>({labels:["F1","F2","F3"],datasets:[{label:"Assorbimento fasi",barThickness:10,data:t.data,backgroundColor:["#fff477","#fff477","#fff477"]}]})));return(e,t)=>((0,r.uX)(),(0,r.CE)("div",g,[(0,r.bF)((0,m.R1)(f.Es),{height:350,width:300,options:l,chartData:n.value},null,8,["chartData"])]))}},k=(0,s.A)(h,[["__scopeId","data-v-4318b551"]]),w=k;var y=l(278);const L={__name:"TotalComponent",props:{value:Number},setup(e){const t=e,l=(0,y.Pj)();(0,r.wB)((()=>t.value),(()=>{const e=l.getters.limit,r=l.getters.soundStatus??!1;l.commit("setAlert",t.value>e),r&&t.value>e&&n()}));const n=()=>{const e=new Audio("/sound.mp3");e.play()};return(t,l)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("h1",null,(0,p.v_)(e.value),1)]))}},C=L,E=C,S={key:0,class:"modal-overlay"},x={class:"modal-container"},_={class:"form-group"},A={class:"form-group"},F={class:"form-group"},R={class:"form-group",style:{flex:"1"}},j={class:"switch"},I={__name:"SettingsComponent",setup(e){const t=(0,m.KR)(!1),l=(0,y.Pj)(),o=(0,m.KR)({url:"",interval:null,limit:null,soundStatus:!1}),a=async()=>{o.value.url=l.getters.url,o.value.interval=l.getters.interval,o.value.limit=l.getters.limit,o.value.soundStatus=l.getters.soundStatus,t.value=!0},s=async()=>{t.value=!1},i=async()=>{o.value.url&&o.value.interval&&o.value.limit?(l.commit("setLimit",o.value.limit),l.commit("setUrl",o.value.url),l.commit("setInterval",o.value.interval),l.commit("setSoundStatus",o.value.soundStatus),s()):alert("Compilare tutti i campi!")};return(e,l)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("button",{style:{position:"absolute","z-index":"10",right:"1rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:a},l[4]||(l[4]=[(0,r.Lk)("i",{class:"fa-solid fa-3x fa-gears"},null,-1)])),t.value?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.Lk)("div",x,[(0,r.Lk)("form",{onSubmit:(0,n.D$)(i,["prevent"])},[(0,r.Lk)("div",_,[l[5]||(l[5]=(0,r.Lk)("label",{for:"url"},"URL:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"url","onUpdate:modelValue":l[0]||(l[0]=e=>o.value.url=e),placeholder:"Inserisci indirizzo"},null,512),[[n.Jo,o.value.url]])]),(0,r.Lk)("div",A,[l[6]||(l[6]=(0,r.Lk)("label",{for:"interval"},"Intervallo richieste (secondi):",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"interval","onUpdate:modelValue":l[1]||(l[1]=e=>o.value.interval=e),min:"1",placeholder:"Inserisci intervallo"},null,512),[[n.Jo,o.value.interval,void 0,{number:!0}]])]),(0,r.Lk)("div",F,[l[7]||(l[7]=(0,r.Lk)("label",{for:"limit"},"Soglia limite (kW):",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"limit","onUpdate:modelValue":l[2]||(l[2]=e=>o.value.limit=e),min:"1",placeholder:"Inserisci soglia limite"},null,512),[[n.Jo,o.value.limit,void 0,{number:!0}]])]),(0,r.Lk)("div",R,[l[9]||(l[9]=(0,r.Lk)("label",{for:"limit"},"Suono attivo:",-1)),(0,r.Lk)("label",j,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=e=>o.value.soundStatus=e)},null,512),[[n.lH,o.value.soundStatus]]),l[8]||(l[8]=(0,r.Lk)("span",{class:"slider"},null,-1))])]),(0,r.Lk)("div",{class:"button-group"},[l[10]||(l[10]=(0,r.Lk)("button",{type:"submit",class:"save-btn",style:{flex:"1"}},"Salva",-1)),(0,r.Lk)("button",{type:"button",class:"cancel-btn",style:{flex:"1"},onClick:s},"Annulla")])],32)])])):(0,r.Q3)("",!0)]))}},O=(0,s.A)(I,[["__scopeId","data-v-8d91ded4"]]),K=O,X={__name:"OfflineAlertComponent",setup(e){const t=(0,m.KR)("");(0,r.sV)((async()=>{window.addEventListener("online",o),window.addEventListener("offline",o)})),(0,r.xo)((()=>{window.removeEventListener("online",o),window.removeEventListener("offline",o)}));const l=(0,m.KR)(navigator.onLine),o=()=>{l.value=navigator.onLine,t.value=l.value?"Sei di nuovo online!":"âš  Connessione persa! Sei offline.",l.value&&setTimeout((()=>{t.value=""}),3e3)};return(e,o)=>((0,r.uX)(),(0,r.Wv)(n.eB,{name:"slide"},{default:(0,r.k6)((()=>[t.value?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,p.C4)(["banner",l.value?"online":"offline"])},(0,p.v_)(t.value),3)):(0,r.Q3)("",!0)])),_:1}))}},U=(0,s.A)(X,[["__scopeId","data-v-3776df69"]]),q=U,T={key:0,class:"error bg-danger"},V={key:1,id:"main"},z={__name:"HomeView",setup(e){const t=(0,m.KR)([]),l=(0,m.KR)(null),n=(0,m.KR)(!1),o=(0,m.KR)(0),a=(0,y.Pj)(),s=(0,m.KR)(2e4),i=(0,m.KR)(!1);(0,r.wB)((()=>a.getters.alert),(function(e){i.value=e})),(0,r.wB)((()=>a.getters.interval),(async function(e){s.value=1e3*e,clearInterval(l.value),await v(),l.value=setInterval((async()=>{await v()}),s.value)})),(0,r.sV)((async()=>{const e=window.innerWidth,t=window.innerHeight;alert(`Screen size is: ${e}x${t}`),await v(),l.value=setInterval((async()=>{await v()}),s.value)})),(0,r.xo)((()=>{clearInterval(l.value)}));const u=()=>{v(),alert("Richiesta aggiornamento dati inviata")},c=()=>{const e=document.documentElement;e.requestFullscreen?(console.log("richiesta fullscreen std"),e.requestFullscreen()):e.webkitRequestFullscreen?(console.log("richiesta fullscreen old"),e.webkitRequestFullscreen()):e.msRequestFullscreen?(console.log("richiesta fullscreen webkit"),e.msRequestFullscreen()):console.error("Error nella richiesta di fullscreen")},v=async()=>{const e=a.getters.url,l=`/.netlify/functions/proxy?url=${encodeURIComponent(e)}`;let r={};try{const e=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw n.value=!0,new Error("Errore nella richiesta");n.value=!1,r=await e.json(),t.value=[r.phases[0].powerActive,r.phases[1].powerActive,r.phases[2].powerActive],o.value=parseFloat((r.phases.reduce(((e,t)=>e+t.powerActive),0)/1e3).toFixed(1))}catch(n){console.error("Errore:",n)}};return(e,l)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,p.C4)(["home",{"bg-danger":i.value,"bg-default":!i.value}])},[n.value?((0,r.uX)(),(0,r.CE)("div",T," Errore nella richiesta! ")):(0,r.Q3)("",!0),(0,r.bF)(K),(0,r.Lk)("button",{style:{position:"absolute","z-index":"10",right:"10rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:c},l[0]||(l[0]=[(0,r.Lk)("i",{class:"fa-solid fa-3x fa-up-right-and-down-left-from-center"},null,-1)])),(0,r.Lk)("button",{style:{position:"absolute","z-index":"10",right:"6rem",top:"1rem","background-color":"transparent",border:"none",color:"white"},onClick:u},l[1]||(l[1]=[(0,r.Lk)("i",{class:"fa-solid fa-3x fa-rotate"},null,-1)])),t.value.length>0?((0,r.uX)(),(0,r.CE)("div",V,[(0,r.bF)(w,{data:t.value},null,8,["data"]),(0,r.bF)(E,{value:o.value,style:{flex:"1"}},null,8,["value"])])):(0,r.Q3)("",!0),(0,r.bF)(q)],2))}},B=(0,s.A)(z,[["__scopeId","data-v-3018adfd"]]),$=B,P=[{path:"/",name:"home",component:$}],Q=(0,d.aE)({history:(0,d.LA)("/"),routes:P}),W=Q,N=(0,y.y$)({state:{url:"https://svr78.supla.org/direct/927/jW53MRbcodQwZj/read?format=json",limit:10,interval:10,alert:!1,soundStatus:!1},getters:{url(e){return e.url},limit(e){return e.limit},interval(e){return e.interval},alert(e){return e.alert},soundStatus(e){return e.soundStatus}},mutations:{setLimit(e,t){e.limit=t},setInterval(e,t){e.interval=t},setUrl(e,t){e.url=t},setAlert(e,t){e.alert=t},setSoundStatus(e,t){e.soundStatus=t}},actions:{},modules:{}});(0,n.Ef)(c).use(N).use(W).mount("#app")}},t={};function l(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,l),o.exports}l.m=e,(()=>{var e=[];l.O=(t,n,r,o)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,r,o]=e[c],s=!0,i=0;i<n.length;i++)(!1&o||a>=o)&&Object.keys(l.O).every((e=>l.O[e](n[i])))?n.splice(i--,1):(s=!1,o<a&&(a=o));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]}})(),(()=>{l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[a,s,i]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(i)var c=i(l)}for(t&&t(n);u<a.length;u++)o=a[u],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(c)},n=self["webpackChunkcontatorev3"]=self["webpackChunkcontatorev3"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=l.O(void 0,[504],(()=>l(305)));n=l.O(n)})();
//# sourceMappingURL=app.054d059d.js.map